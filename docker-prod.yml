version: '2'
services:
  moodle-app:
    container_name: moodle-app
    image: docker.io/bitnami/moodle:4.1
    env_file: .env
    # working_dir: /var/www
    ports:
      - '1012:8443'
    networks:
      - dclm
    volumes:
      - ./data/moodle_data:/bitnami/moodle'
      - ./data/moodledata_data:/bitnami/moodledata'
      - /etc/letsencrypt/live/dclm.org/fullchain.pem:/certs/server.crt
      - /etc/letsencrypt/live/dclm.org/privkey.pem:/certs/server.key

networks:
  dclm:
    name: dclm
    external: true
